<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPW Pictures - Official</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root { --primary: #ff0000; --secondary: #7c3aed; --dark: #0b1120; }
        body { background-color: var(--dark); color: #e5e7eb; font-family: 'Poppins', sans-serif; overflow-x: hidden; }
        
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); }
        .glass-nav { background: rgba(11, 17, 32, 0.8); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255,255,255,0.05); }

        .profile-pic { width: 160px; height: 160px; border-radius: 50%; border: 4px solid #fff; box-shadow: 0 0 30px rgba(255, 0, 0, 0.6); object-fit: cover; animation: pulse-border 3s infinite; }
        @keyframes pulse-border { 0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(255, 0, 0, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); } }

        .float-social { animation: float-up-down 3s ease-in-out infinite; }
        @keyframes float-up-down { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .tab-btn.active { background: #dc2626; color: white; border-color: #dc2626; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyDaZlcrUsIxIMgwCK1V9s9NvfhVY2eCLfg",
            authDomain: "spw-pictures.firebaseapp.com",
            projectId: "spw-pictures",
            storageBucket: "spw-pictures.firebasestorage.app",
            messagingSenderId: "1000800930302",
            appId: "1:1000800930302:web:9e2cc5c16d10761f8dd8af",
            measurementId: "G-YX1YH1VYEX"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const storage = firebase.storage(); // Init Storage

        const { useState, useEffect } = React;

        // --- DEFAULT DATA ---
        const defaultData = {
            dp: "dp.png",
            about: "SPW Pictures ek creative YouTube channel hai jahan aapko tech videos, vlogs aur informative content milta hai.",
            instagram: "https://www.instagram.com/___spw__pictures__?igshid=YmMyMTA2M2Y%3D",
            youtube: "https://www.youtube.com/@spwpictures",
            email: "akhtarshoeb702@gmail.com"
        };

        // --- COMPONENTS ---

        const Navbar = ({ setPage }) => (
            <nav className="fixed top-0 w-full z-50 glass-nav px-6 py-4 flex justify-between items-center transition-all duration-300">
                <div onClick={() => setPage('home')} className="cursor-pointer flex items-center gap-3">
                    <div className="w-10 h-10 bg-gradient-to-br from-red-600 to-purple-600 rounded-full flex items-center justify-center">
                        <i className="fa-solid fa-play text-white text-xs"></i>
                    </div>
                    <span className="font-bold text-xl tracking-wide text-white">SPW Pictures</span>
                </div>
                <div className="flex gap-4">
                    <a href="#about" className="hidden md:block hover:text-red-500 transition pt-2">About</a>
                    <a href="#gallery" className="hidden md:block hover:text-red-500 transition pt-2">Gallery</a>
                    <button onClick={() => setPage('admin')} className="bg-red-600/20 text-red-500 border border-red-500/50 px-4 py-2 rounded-full hover:bg-red-600 hover:text-white transition font-bold text-sm">
                        <i className="fa-solid fa-gear mr-1"></i> Admin
                    </button>
                </div>
            </nav>
        );

        const Home = () => {
            const [settings, setSettings] = useState(defaultData);
            const [videos, setVideos] = useState([]);
            const [photos, setPhotos] = useState([]);

            useEffect(() => {
                AOS.init({ duration: 1000, once: true });
                VanillaTilt.init(document.querySelectorAll("[data-tilt]"), { max: 10, speed: 400, glare: true, "max-glare": 0.2 });

                db.collection("settings").doc("config").get().then(doc => {
                    if (doc.exists) setSettings({ ...defaultData, ...doc.data() });
                });
                db.collection("videos").orderBy("createdAt", "desc").get().then(snap => {
                    setVideos(snap.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                });
                db.collection("photos").orderBy("createdAt", "desc").get().then(snap => {
                    setPhotos(snap.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                });
            }, []);

            return (
                <div className="min-h-screen relative">
                    <a href={settings.instagram} target="_blank" className="fixed bottom-6 right-6 z-40 float-social bg-gradient-to-tr from-yellow-500 via-pink-500 to-purple-600 p-4 rounded-full shadow-[0_0_20px_rgba(236,72,153,0.6)] hover:scale-110 transition text-white text-2xl flex items-center justify-center w-14 h-14" title="DM on Instagram">
                        <i className="fa-brands fa-instagram"></i>
                    </a>

                    <header className="relative pt-40 pb-20 px-4 text-center">
                        <div className="relative z-10" data-aos="zoom-in">
                            <img src={settings.dp} alt="Profile" className="profile-pic mx-auto mb-8 bg-gray-800" onError={(e)=>{e.target.src='https://via.placeholder.com/150'}} />
                            <h1 className="text-5xl md:text-7xl font-extrabold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-white via-gray-200 to-gray-500">SPW Pictures</h1>
                            <p className="text-xl text-gray-400 font-light max-w-2xl mx-auto">Official Portfolio <span className="text-red-500">•</span> Tech & Vlogs</p>
                            <div className="mt-8 flex justify-center gap-4">
                                <a href={settings.youtube} target="_blank" className="bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-full font-bold transition shadow-lg flex items-center gap-2"><i className="fa-brands fa-youtube"></i> Subscribe</a>
                                <a href={settings.instagram} target="_blank" className="glass hover:bg-white/10 text-white px-8 py-3 rounded-full font-bold transition-all flex items-center gap-2"><i className="fa-brands fa-instagram text-pink-500"></i> Follow</a>
                            </div>
                        </div>
                    </header>

                    <section id="about" className="py-20 px-4">
                        <div className="max-w-4xl mx-auto glass p-10 rounded-3xl relative overflow-hidden" data-aos="fade-up">
                            <div className="absolute top-0 left-0 w-2 h-full bg-gradient-to-b from-red-600 to-purple-600"></div>
                            <h2 className="text-3xl font-bold mb-6 flex items-center gap-3"><span className="text-red-500 text-4xl">❝</span> About Us</h2>
                            <p className="text-gray-300 text-lg leading-loose whitespace-pre-wrap">{settings.about}</p>
                        </div>
                    </section>

                    <section id="videos" className="py-10 max-w-7xl mx-auto px-6">
                        <h2 className="text-3xl font-bold mb-8 pl-4 border-l-4 border-red-500" data-aos="fade-right">Latest Videos</h2>
                        {videos.length === 0 ? <p className="text-gray-500 text-center">Loading videos...</p> : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                {videos.map(video => (
                                    <div key={video.id} className="glass rounded-2xl overflow-hidden group hover:-translate-y-2 transition-transform duration-300">
                                        <div className="relative aspect-video bg-black">
                                            <img src={video.thumbnail} className="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition" />
                                            <a href={`https://youtube.com/watch?v=${video.url}`} target="_blank" className="absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition"><i className="fa-solid fa-play text-red-600 text-5xl"></i></a>
                                        </div>
                                        <div className="p-4"><h3 className="font-bold text-lg line-clamp-2">{video.title}</h3></div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </section>

                    <section id="gallery" className="py-10 max-w-7xl mx-auto px-6">
                        <h2 className="text-3xl font-bold mb-8 pl-4 border-l-4 border-purple-500" data-aos="fade-right">Photo Gallery</h2>
                        {photos.length === 0 ? <p className="text-gray-500 text-center">No photos available.</p> : (
                            <div className="columns-1 md:columns-3 gap-4 space-y-4">
                                {photos.map(photo => (
                                    <div key={photo.id} className="break-inside-avoid glass rounded-xl overflow-hidden mb-4" data-aos="zoom-in">
                                        <img src={photo.url} alt="Gallery" className="w-full object-cover hover:scale-105 transition duration-500" />
                                    </div>
                                ))}
                            </div>
                        )}
                    </section>

                    <section id="contact" className="py-20 px-4">
                         <div className="max-w-xl mx-auto text-center" data-aos="zoom-in">
                            <h2 className="text-3xl font-bold mb-6">Contact Me</h2>
                            <form action={`mailto:${settings.email}`} method="post" encType="text/plain" className="glass p-8 rounded-2xl space-y-4">
                                <input type="text" placeholder="Name" className="w-full bg-gray-900/50 border border-gray-700 rounded p-3 text-white focus:border-red-500 outline-none" required />
                                <input type="email" placeholder="Email" className="w-full bg-gray-900/50 border border-gray-700 rounded p-3 text-white focus:border-red-500 outline-none" required />
                                <textarea placeholder="Message" className="w-full bg-gray-900/50 border border-gray-700 rounded p-3 text-white focus:border-red-500 outline-none" rows="4" required></textarea>
                                <button className="w-full bg-red-600 hover:bg-red-700 py-3 rounded font-bold">Send Message</button>
                            </form>
                        </div>
                    </section>
                    
                    <footer className="text-center py-10 border-t border-gray-800 text-gray-500 text-sm bg-black/40">
                        <p>© 2026 SPW Pictures | Designed by Shoeb Akhtar</p>
                        <div className="mt-4 flex justify-center gap-6 text-2xl">
                            <a href={settings.instagram} target="_blank" className="hover:text-pink-500 transition hover:scale-110"><i className="fa-brands fa-instagram"></i></a>
                            <a href={settings.youtube} target="_blank" className="hover:text-red-500 transition hover:scale-110"><i className="fa-brands fa-youtube"></i></a>
                            <a href={`mailto:${settings.email}`} className="hover:text-blue-400 transition hover:scale-110"><i className="fa-solid fa-envelope"></i></a>
                        </div>
                    </footer>
                </div>
            );
        };

        // --- ADMIN PANEL WITH FILE UPLOAD ---
        const Admin = ({ setPage }) => {
            const [pass, setPass] = useState("");
            const [auth, setAuth] = useState(false);
            const [activeTab, setActiveTab] = useState("general");
            const [loading, setLoading] = useState(false);
            const [status, setStatus] = useState("");

            const [settings, setSettings] = useState(defaultData);
            const [dpFile, setDpFile] = useState(null); // File state for DP

            const [videoForm, setVideoForm] = useState({ title: '', url: '' });
            const [thumbFile, setThumbFile] = useState(null); // File state for Thumbnail

            const [photoFile, setPhotoFile] = useState(null); // File state for Gallery
            const [photoCaption, setPhotoCaption] = useState("");

            useEffect(() => {
                if(auth) {
                    db.collection("settings").doc("config").get().then(doc => {
                        if(doc.exists) setSettings({ ...defaultData, ...doc.data() });
                    });
                }
            }, [auth]);

            const handleLogin = (e) => { e.preventDefault(); if (pass === "admin") setAuth(true); else alert("Incorrect Password"); };

            // Helper to upload file to Firebase Storage
            const uploadFileToStorage = async (file, path) => {
                const storageRef = storage.ref();
                const fileRef = storageRef.child(`${path}/${Date.now()}_${file.name}`);
                await fileRef.put(file);
                return await fileRef.getDownloadURL();
            };

            const saveSettings = async () => {
                setLoading(true); setStatus("Saving...");
                try {
                    let updatedSettings = { ...settings };
                    if (dpFile) {
                        setStatus("Uploading DP...");
                        const dpUrl = await uploadFileToStorage(dpFile, "profile_pics");
                        updatedSettings.dp = dpUrl;
                    }
                    await db.collection("settings").doc("config").set(updatedSettings);
                    setDpFile(null); // Reset file input
                    alert("✅ Settings Updated!");
                } catch(err) { alert("Error: " + err.message); }
                setLoading(false); setStatus("");
            };

            const uploadVideo = async (e) => {
                e.preventDefault();
                setLoading(true); setStatus("Uploading Thumbnail...");
                try {
                    let thumbUrl = "https://via.placeholder.com/640x360"; // Default
                    if (thumbFile) {
                        thumbUrl = await uploadFileToStorage(thumbFile, "thumbnails");
                    }
                    setStatus("Publishing Video...");
                    await db.collection("videos").add({
                        title: videoForm.title,
                        url: videoForm.url,
                        thumbnail: thumbUrl,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    alert("✅ Video Added!");
                    setVideoForm({ title: '', url: '' }); setThumbFile(null);
                } catch(err) { alert("Error: " + err.message); }
                setLoading(false); setStatus("");
            };

            const uploadPhoto = async (e) => {
                e.preventDefault();
                if(!photoFile) { alert("Please select a file!"); return; }
                setLoading(true); setStatus("Uploading Photo...");
                try {
                    const photoUrl = await uploadFileToStorage(photoFile, "gallery");
                    await db.collection("photos").add({
                        url: photoUrl,
                        caption: photoCaption,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    alert("✅ Photo Added!");
                    setPhotoFile(null); setPhotoCaption("");
                } catch(err) { alert("Error: " + err.message); }
                setLoading(false); setStatus("");
            };

            if (!auth) return (
                <div className="min-h-screen flex items-center justify-center bg-black">
                    <div className="glass p-10 rounded-2xl w-96 text-center">
                        <h2 className="text-2xl font-bold mb-6">Admin Login</h2>
                        <form onSubmit={handleLogin}>
                            <input type="password" placeholder="Password (admin)" value={pass} onChange={e => setPass(e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded p-3 mb-4 text-white focus:border-red-500 outline-none" autoFocus />
                            <button className="w-full bg-red-600 hover:bg-red-700 py-3 rounded font-bold">Access Panel</button>
                        </form>
                        <button onClick={() => setPage('home')} className="mt-4 text-gray-500 hover:text-white text-sm">Back</button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen pt-20 px-4 flex justify-center pb-20">
                    <div className="w-full max-w-5xl">
                        <div className="glass rounded-3xl overflow-hidden min-h-[600px] flex flex-col md:flex-row">
                            <div className="w-full md:w-64 bg-black/40 p-6 border-r border-gray-800">
                                <h2 className="text-xl font-bold mb-8 text-red-500">Admin Panel</h2>
                                <div className="space-y-2">
                                    <button onClick={() => setActiveTab('general')} className={`w-full text-left p-3 rounded-lg tab-btn ${activeTab === 'general' ? 'active' : 'text-gray-400 hover:bg-white/5'}`}><i className="fa-solid fa-sliders mr-2"></i> Settings</button>
                                    <button onClick={() => setActiveTab('videos')} className={`w-full text-left p-3 rounded-lg tab-btn ${activeTab === 'videos' ? 'active' : 'text-gray-400 hover:bg-white/5'}`}><i className="fa-brands fa-youtube mr-2"></i> Manage Videos</button>
                                    <button onClick={() => setActiveTab('photos')} className={`w-full text-left p-3 rounded-lg tab-btn ${activeTab === 'photos' ? 'active' : 'text-gray-400 hover:bg-white/5'}`}><i className="fa-solid fa-image mr-2"></i> Gallery Upload</button>
                                    <hr className="border-gray-700 my-4"/>
                                    <button onClick={() => setPage('home')} className="w-full text-left p-3 text-red-400 hover:bg-red-900/20 rounded-lg"><i className="fa-solid fa-arrow-right-from-bracket mr-2"></i> Exit</button>
                                </div>
                            </div>

                            <div className="flex-1 p-8 overflow-y-auto max-h-[80vh]">
                                {loading && <div className="mb-4 p-3 bg-blue-900/50 text-blue-200 rounded border border-blue-500/50 flex items-center gap-2"><i className="fa-solid fa-spinner fa-spin"></i> {status}</div>}

                                {activeTab === 'general' && (
                                    <div className="space-y-6 animate-[fadeIn_0.5s]">
                                        <h3 className="text-2xl font-bold border-b border-gray-700 pb-2">Profile & Social</h3>
                                        <div>
                                            <label className="text-xs font-bold text-gray-400 uppercase">Change Profile Picture (Upload)</label>
                                            <input type="file" onChange={e => setDpFile(e.target.files[0])} className="w-full bg-gray-900 border border-gray-700 rounded p-2 mt-1 text-white"/>
                                            <p className="text-xs text-gray-500 mt-1">Current: {settings.dp}</p>
                                        </div>
                                        <div className="grid md:grid-cols-2 gap-4">
                                            <div><label className="text-xs font-bold text-gray-400 uppercase">Email</label><input type="text" value={settings.email} onChange={e => setSettings({...settings, email: e.target.value})} className="w-full bg-gray-900 border border-gray-700 rounded p-3 mt-1 text-white focus:border-red-500 outline-none"/></div>
                                            <div><label className="text-xs font-bold text-gray-400 uppercase">Instagram Link</label><input type="text" value={settings.instagram} onChange={e => setSettings({...settings, instagram: e.target.value})} className="w-full bg-gray-900 border border-gray-700 rounded p-3 mt-1 text-white focus:border-red-500 outline-none"/></div>
                                        </div>
                                        <div><label className="text-xs font-bold text-gray-400 uppercase">About Us</label><textarea rows="4" value={settings.about} onChange={e => setSettings({...settings, about: e.target.value})} className="w-full bg-gray-900 border border-gray-700 rounded p-3 mt-1 text-white focus:border-red-500 outline-none"></textarea></div>
                                        <button onClick={saveSettings} disabled={loading} className="bg-gradient-to-r from-red-600 to-purple-600 w-full py-3 rounded font-bold hover:shadow-lg transition">Save Changes</button>
                                    </div>
                                )}

                                {activeTab === 'videos' && (
                                    <div className="space-y-6 animate-[fadeIn_0.5s]">
                                        <h3 className="text-2xl font-bold border-b border-gray-700 pb-2">Add New Video</h3>
                                        <form onSubmit={uploadVideo} className="space-y-4">
                                            <input type="text" placeholder="Video Title" value={videoForm.title} onChange={e => setVideoForm({...videoForm, title: e.target.value})} required className="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-red-500 outline-none"/>
                                            <input type="text" placeholder="YouTube Video ID (e.g. DnzjlURxQVo)" value={videoForm.url} onChange={e => setVideoForm({...videoForm, url: e.target.value})} required className="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-red-500 outline-none"/>
                                            <div>
                                                <label className="text-xs font-bold text-gray-400 uppercase">Upload Thumbnail</label>
                                                <input type="file" onChange={e => setThumbFile(e.target.files[0])} required className="w-full bg-gray-900 border border-gray-700 rounded p-2 mt-1 text-white"/>
                                            </div>
                                            <button disabled={loading} className="w-full bg-red-600 hover:bg-red-700 py-3 rounded font-bold">Publish Video</button>
                                        </form>
                                    </div>
                                )}

                                {activeTab === 'photos' && (
                                    <div className="space-y-6 animate-[fadeIn_0.5s]">
                                        <h3 className="text-2xl font-bold border-b border-gray-700 pb-2">Upload to Gallery</h3>
                                        <form onSubmit={uploadPhoto} className="space-y-4">
                                            <div>
                                                <label className="text-xs font-bold text-gray-400 uppercase">Select Photo</label>
                                                <input type="file" onChange={e => setPhotoFile(e.target.files[0])} required className="w-full bg-gray-900 border border-gray-700 rounded p-2 mt-1 text-white"/>
                                            </div>
                                            <input type="text" placeholder="Caption (Optional)" value={photoCaption} onChange={e => setPhotoCaption(e.target.value)} className="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-red-500 outline-none"/>
                                            <button disabled={loading} className="w-full bg-blue-600 hover:bg-blue-700 py-3 rounded font-bold">Upload Photo</button>
                                        </form>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => { const [page, setPage] = useState('home'); return <div><Navbar setPage={setPage} />{page === 'home' ? <Home /> : <Admin setPage={setPage} />}</div>; };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
